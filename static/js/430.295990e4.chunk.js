"use strict";(self.webpackChunkfuse_react_app=self.webpackChunkfuse_react_app||[]).push([[430],{42430:function(e,t,a){a.r(t),a.d(t,{default:function(){return oe}});var n=a(23132),r=a(47313),s=a(45894),i=a(1413),o=a(14790),c=a(75908),l=a(66149),u=a(96467),d=a(71263),p=a(16783),f=a(9289),g=a(61113),x=a(75627),m=a(3463),h=a(51405),v=a(4942),k=a(15861),y=a(87757),C=a.n(y),j=a(2628),Z=a(31881),w=a.n(Z),N=a(19386),b=(0,j.hg)("taskConfigApp/taskConfig/getTasks",function(){var e=(0,k.Z)(C().mark((function e(t,a){var n,r,s;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.getState,t=t||n().taskConfigApp.taskConfig.routeParams,e.next=4,w().get("".concat(N.J,"/api/TaskActivity"));case 4:return r=e.sent,e.next=7,r.data;case 7:return s=e.sent,e.abrupt("return",{data:s,routeParams:t});case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),T=(0,j.hg)("taskConfigApp/taskConfig/addNewTaskType",function(){var e=(0,k.Z)(C().mark((function e(t,a){var n,r,s;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.dispatch,e.next=3,w().post("".concat(N.J,"/api/TaskActivity"),t);case 3:return r=e.sent,e.next=6,r.data;case 6:return s=e.sent,n(b()),e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),D=(0,j.hg)("taskConfigApp/taskConfig/updateTaskType",function(){var e=(0,k.Z)(C().mark((function e(t,a){var n,r,s;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.dispatch,e.next=3,w().put("".concat(N.J,"/api/TaskActivity/").concat(t.id),t);case 3:return r=e.sent,e.next=6,r.data;case 6:return s=e.sent,n(b()),e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),A=(0,j.hg)("taskConfigApp/taskConfig/removeTaskType",function(){var e=(0,k.Z)(C().mark((function e(t,a){var n,r,s;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.dispatch,e.next=3,w().delete("".concat(N.J,"/api/TaskActivity/").concat(t));case 3:return r=e.sent,e.next=6,r.data;case 6:return s=e.sent,n(b()),e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),S=(0,j.HF)({}),I=S.getSelectors((function(e){return e.taskConfigApp.taskConfig})).selectAll,P=(0,j.oM)({name:"taskConfigApp/taskConfig",initialState:S.getInitialState({searchText:"",routeParams:{},params:"",taskConfigs:[],taskConfigDialog:{type:"new",props:{open:!1},data:null}}),reducers:{setTaskConfigSearchText:{reducer:function(e,t){e.searchText=t.payload},prepare:function(e){return{payload:e.target.value||""}}},openNewTaskConfigDialog:function(e){e.taskConfigDialog={type:"new",props:{open:!0},data:null}},closeNewTaskConfigDialog:function(e){e.taskConfigDialog={type:"new",props:{open:!1},data:null}},openEditTaskConfigDialog:function(e,t){e.taskConfigDialog={type:"edit",props:{open:!0},data:t.payload}},closeEditTaskConfigDialog:function(e){e.taskConfigDialog={type:"edit",props:{open:!1},data:null}}},extraReducers:(0,v.Z)({},b.fulfilled,(function(e,t){var a=t.payload,n=a.data,r=a.routeParams;S.setAll(e,n),e.taskConfigs=n,e.routeParams=r}))}),E=P.actions,V=(E.setTaskConfigSearchText,E.openNewTaskConfigDialog),H=E.closeNewTaskConfigDialog,_=E.openEditTaskConfigDialog,F=E.closeEditTaskConfigDialog,W=P.reducer,J=a(43850),M=a(84305),O=a(46417),R={name:"",description:"",taskCategoryId:1},q=m.Ry().shape({name:m.Z_().required("Debe ingresar un nombre").min(3,"Debe ser mayor de 2 caracteres.")});var Q=function(){var e=[],t=(0,s.I0)(),a=(0,s.v9)((function(e){return e.taskConfigApp.taskConfig.taskConfigDialog})),n=(0,x.cI)({mode:"onChange",defaultValues:R,resolver:(0,o.X)(q)}),m=n.control,v=n.reset,k=n.handleSubmit,y=n.formState,C=y.errors,j=y.isValid,Z=(0,r.useCallback)((function(){"edit"===a.type&&a.data&&v((0,i.Z)((0,i.Z)({},a.data),{},{taskCategoryId:a.data.taskCategory.id})),"new"===a.type&&v(R)}),[a.data,a.type,v]);function w(){return"edit"===a.type?t(F()):t(H())}return(0,r.useEffect)((function(){a.props.open&&Z()}),[a.props.open,Z]),(0,O.jsxs)(l.Z,(0,i.Z)((0,i.Z)({classes:{paper:"m-24"}},a.props),{},{onClose:w,fullWidth:!0,maxWidth:"xs",children:[(0,O.jsxs)(c.Z,{position:"static",elevation:0,children:[(0,O.jsx)(f.Z,{className:"flex w-full",children:(0,O.jsx)(g.Z,{variant:"subtitle1",color:"inherit",children:"new"===a.type?"Nuevo":"Editar"})}),(0,O.jsx)("div",{className:"flex flex-col items-center justify-center pb-24",children:"edit"===a.type&&(0,O.jsx)(g.Z,{variant:"h6",color:"inherit",className:"pt-8"})})]}),(0,O.jsxs)("form",{noValidate:!0,onSubmit:k((function(e){"new"===a.type?(t(J.PV({message:"Creando..."})),t(T(e))):(t(J.PV({message:"Actualizando..."})),t(D((0,i.Z)((0,i.Z)({},a.data),e)))),w()})),className:"flex flex-col md:overflow-hidden",children:[(0,O.jsxs)(u.Z,{classes:{root:"p-24"},children:[(0,O.jsxs)("div",{className:"flex",children:[(0,O.jsx)("div",{className:"min-w-48 pt-20",children:(0,O.jsx)(d.Z,{color:"action",children:"account_circle"})}),(0,O.jsx)(x.Qr,{control:m,name:"name",render:function(e){var t,a=e.field;return(0,O.jsx)(p.Z,(0,i.Z)((0,i.Z)({},a),{},{className:"mb-24",label:"Nombre",type:"text",error:!!C.name,helperText:null===C||void 0===C||null===(t=C.name)||void 0===t?void 0:t.message,variant:"outlined",required:!0,fullWidth:!0}))}})]}),(0,O.jsxs)("div",{className:"flex",children:[(0,O.jsx)("div",{className:"min-w-48 pt-20",children:(0,O.jsx)(d.Z,{color:"action",children:"category"})}),(0,O.jsx)(x.Qr,{control:m,name:"description",render:function(e){var t=e.field;return(0,O.jsx)(p.Z,(0,i.Z)((0,i.Z)({},t),{},{className:"mb-24",label:"Descripci\xf3n",variant:"outlined",type:"text",fullWidth:!0}))}})]}),(0,O.jsxs)("div",{className:"flex",children:[(0,O.jsx)("div",{className:"min-w-48 pt-20",children:(0,O.jsx)(d.Z,{color:"action",children:"category"})}),(0,O.jsx)(x.Qr,{name:"taskCategoryId",control:m,render:function(t){var a=t.field;return(0,O.jsx)(p.Z,(0,i.Z)((0,i.Z)({},a),{},{autoFocus:!0,select:!0,margin:"dense",label:"Categor\xeda",className:"w-full",required:!0,children:e.map((function(e){return(0,O.jsx)(h.Z,{value:e.id,children:e.name},e.id)}))}))}})]})]}),(0,O.jsx)(M.Z,{dialogType:a.type,isValid:j})]})]}))},G=a(29439),z=a(62321),L=a(47131),U=a(93695),X=a(73754),Y=a(24807),B=a(41789),K=a(1421);var $=function(){var e=(0,s.I0)(),t=(0,s.v9)(I),a=(0,s.v9)((function(e){return e.taskConfigApp.taskConfig.searchText})),n=(0,B.Z)(t,a),i=n.statusFilter,o=n.filteredData,c=(0,r.useState)(!1),l=(0,G.Z)(c,2),u=l[0],p=l[1],f=(0,r.useState)(0),x=(0,G.Z)(f,2),m=x[0],h=x[1],v=(0,r.useMemo)((function(){return[{Header:"Nombre",accessor:"name",sortable:!0},{Header:"Descripci\xf3n",accessor:"description",sortable:!0},{Header:"Categor\xeda",className:"font-bold whitespace-no-wrap",width:128,sortable:!1,Cell:function(e){var t=e.row;return(0,O.jsx)(Y.Z,{status:t.original.taskCategory.id})}},{id:"action",Header:"Eliminar",className:"justify-center",width:128,sortable:!1,Cell:function(e){var t=e.row;return(0,O.jsx)("div",{className:"flex items-center",children:(0,O.jsx)(L.Z,{onClick:function(e){e.stopPropagation(),p(!0),h(t.original.id)},children:(0,O.jsx)(d.Z,{children:"delete"})})})}}]}),[]);return i&&!o.length?(0,O.jsx)("div",{className:"flex flex-1 items-center justify-center h-full",children:(0,O.jsx)(g.Z,{color:"textSecondary",variant:"h5",children:"No hay datos!"})}):i?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(z.E.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1,transition:{delay:.2}},className:"flex flex-auto w-full max-h-full",children:(0,O.jsx)(K.Z,{columns:v,data:o,onRowClick:function(t,a){a&&e(_(a.original))},rowsPerPageOptions:[5,10,15,25]})}),(0,O.jsx)(U.Z,{isOpen:u,setIsOpen:p,deleteData:function(){e(A(m))},message:"este sensor"})]}):(0,O.jsx)(X.Z,{})},ee=a(69099),te=a(82295);var ae=function(){var e=(0,s.I0)();return(0,O.jsx)("div",{className:"p-0 lg:p-24 lg:ltr:pr-4 lg:rtl:pl-4",children:(0,O.jsx)(te.Z,{component:z.E.div,initial:{y:20,opacity:0},animate:{y:0,opacity:1,transition:{delay:.2}},className:"rounded-0 shadow-none lg:rounded-16 lg:shadow",children:(0,O.jsx)("div",{className:"p-24",children:(0,O.jsx)(ee.Z,{variant:"contained",color:"secondary",className:"w-full",onClick:function(){return e(V())},children:"Crear"})})})})},ne=(0,a(9038).UY)({taskConfig:W}),re=a(2275),se=a(23025),ie=(0,re.Z)();var oe=(0,n.Z)("taskConfigApp",ne)((function(){var e=(0,s.I0)(),t=(0,r.useRef)(null);return(0,r.useEffect)((function(){e(b())}),[]),(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(ie,{header:(0,O.jsx)(se.Z,{pageLayout:t,headerName:"Sensores",iconType:"adjust"}),content:(0,O.jsx)($,{}),leftSidebarContent:(0,O.jsx)(ae,{}),sidebarInner:!0,ref:t,innerScroll:!0}),(0,O.jsx)(Q,{})]})}))},24807:function(e,t,a){a.d(t,{Z:function(){return o}});var n=a(83061),r=a(61113),s=function(e){return function(e){switch(e){case 1:return"Ventas";case 2:return"Gesti\xf3n Humana";case 3:return"Contabilidad";case 4:return"Almac\xe9n";case 5:return"Operaciones";case 6:return"Proyectos";case 7:return"Tecnolog\xeda";case 8:return"Mensajer\xeda";case 9:return"Compras";case 10:return"Mantenimiento";case 16:return"Gerencia";default:return""}}(e)},i=a(46417);var o=function(e){var t=e.status,a=s(t);return(0,i.jsx)(r.Z,{noWrap:!0,className:(0,n.Z)("bg-gray-900 text-white inline text-11 font-500 px-8 py-4 rounded-4 uppercase"),children:a})}}}]);