"use strict";(self.webpackChunkfuse_react_app=self.webpackChunkfuse_react_app||[]).push([[986],{50986:function(e,t,n){n.r(t),n.d(t,{default:function(){return T}});var a=n(15671),r=n(43144),i=n(60136),c=n(29388),o=n(29439),l=n(83061),s=n(47313),d=n(31881),u=n.n(d),m=n(19386),x=n(70816),f=n.n(x),p=n(43295),h=n(48070),j=n(17551),v=n(97890),Z=n(73428),N=n(93405),y=n(61113),b=n(51629),g=n(66835),k=n(23477),C=n(24076),S=n(67478),w=n(69099),I=n(82295),D=n(73754),M=n(37923),E=n(57861),A=n(43187),B=n(46417),L="#DE2D2D",O="#d49503",P=function(e){var t=e.prediction,n=e.predictedLeafName;return(0,B.jsx)(E.Z,{children:(0,B.jsxs)(C.Z,{children:[(0,B.jsx)(S.Z,{className:"print:hidden",align:"center",children:(0,B.jsx)(w.Z,{className:"ml-6",variant:"contained",onClick:function(){},endIcon:(0,B.jsx)(A.Z,{}),children:"Ver"})}),t.leafPredictions.map((function(e){return(0,B.jsxs)(S.Z,{align:"center",style:{color:(t=100*e.value,a=e.name,n===a&&t<80?O:n!==a&&t>80?L:"")},children:[(100*e.value).toFixed(2),"%"]},e.name);var t,a}))]})})},Y=(0,h.Z)((function(e){return{divider:{backgroundColor:e.palette.divider}}})),_=function(e){var t,n,a=e.productionDate,r=e.leafName,i=e.predictions,c=e.actualMachine,o=Y();return(0,B.jsxs)("div",{className:"flex flex-col md:flex-row print:flex-row justify-between",children:[(0,B.jsxs)("div",{className:"flex flex-col",children:[(0,B.jsx)(y.Z,{color:"textSecondary",className:"text-16",children:(0,B.jsx)("b",{children:null===c||void 0===c?void 0:c.model})}),(0,B.jsxs)(y.Z,{color:"textSecondary",className:"text-16",children:[(0,B.jsx)("b",{children:"Operador:"})," ",null===(t=i[0].account)||void 0===t?void 0:t.firstName," ",null===(n=i[0].account)||void 0===n?void 0:n.lastName]})]}),(0,B.jsx)("div",{className:(0,l.Z)(o.divider,"mx-32 md:w-px md:h-auto print:w-px print:h-auto print:mx-16")}),(0,B.jsxs)("div",{className:"mt-16 md:mt-0 print:mt-0",children:[(0,B.jsx)(y.Z,{color:"textSecondary",className:"mb-8 font-light text-center",variant:"h4",children:r}),(0,B.jsx)("table",{className:"w-full",children:(0,B.jsx)("tbody",{children:(0,B.jsxs)("tr",{children:[(0,B.jsx)("td",{className:"text-center md:text-right print:text-right",children:(0,B.jsx)(y.Z,{color:"textSecondary",children:"FECHA CREACI\xd3N:"})}),(0,B.jsx)("td",{className:"sm:px-16 print:px-16",children:(0,B.jsx)(y.Z,{color:"textSecondary",children:f()(a).format("DD-MM-YYYY h:mm A")})})]})})})]})]})},R=(0,h.Z)((function(e){return{root:{background:"radial-gradient(".concat((0,j._j)(e.palette.primary.dark,.5)," 0%, ").concat(e.palette.primary.dark," 80%)")},divider:{backgroundColor:e.palette.divider}}})),F=document.title;var T=function(){var e=R(),t=(0,s.useRef)(),n=(0,v.UO)(),d=n.date,x=n.operatorId,h=n.leafName,j=(0,s.useState)({machine:{id:0,model:""}}),E=(0,o.Z)(j,2),A=E[0],L=E[1],O="PREDICCIONES-".concat(h,"_").concat(f()(d).format("DD-MM-YYYY")),Y=(0,s.useState)([]),T=(0,o.Z)(Y,2),z=T[0],H=T[1],J=(0,s.useState)([]),V=(0,o.Z)(J,2),U=V[0],q=V[1],G=(0,s.useState)(!1),K=(0,o.Z)(G,2),Q=K[0],W=K[1],X=(0,s.useState)(!1),$=(0,o.Z)(X,2),ee=$[0],te=$[1],ne=(0,p.useReactToPrint)({content:function(){return t.current},onAfterPrint:function(){te(!1),document.title=F}});(0,s.useEffect)((function(){u().get("".concat(m.J,"/api/LeafCount/predictions/").concat(d,"/").concat(x,"/").concat(h)).then((function(e){H(e.data),W(!0)})),u().get("".concat(m.J,"/api/LoginActivityLog/machine/").concat(d,"/").concat(x)).then((function(e){L(e.data)})),u().get("".concat(m.J,"/api/LeafType")).then((function(e){e.data.sort((function(e,t){return ae(e,t)})),q(e.data)}))}),[]);var ae=function(e,t){return e.name<t.name?-1:e.name===t.name?0:1},re=function(e){(0,i.Z)(n,e);var t=(0,c.Z)(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n,[{key:"render",value:function(){return z.length>0?(0,B.jsx)(Z.Z,{className:"mx-auto w-full print:shadow-none rounded-8 print:px-48 print:pt-32",children:(0,B.jsxs)(N.Z,{className:"py-60 md:p-60 print:p-0",children:[ee&&(0,B.jsx)(M.Z,{callBack:ne}),(0,B.jsx)(_,{actualMachine:A.machine,productionDate:d,leafName:h,predictions:z}),(0,B.jsxs)("div",{className:"print:mt-28 mt-28",children:[(0,B.jsx)(y.Z,{variant:"h6",className:"text-32 flex mt-32 mb-16 justify-center",gutterBottom:!0,component:"div",children:"CLASIFICACIONES"}),(0,B.jsx)(b.Z,{component:I.Z,className:"text-16 mb-36 mt-12",children:(0,B.jsxs)(g.Z,{"aria-label":"simple table",children:[(0,B.jsx)(k.Z,{children:(0,B.jsxs)(C.Z,{children:[(0,B.jsx)(S.Z,{className:"print:hidden",align:"center",children:"FOTO"}),U.map((function(e){return(0,B.jsx)(S.Z,{align:"center",children:e.description},e.id)}))]})}),z.map((function(e){return(0,B.jsx)(P,{prediction:e,predictedLeafName:h},e.id)}))]})})]})]})}):(0,B.jsx)("div",{className:"flex flex-1 items-center justify-center h-full",children:(0,B.jsx)(y.Z,{color:"textSecondary",variant:"h5",children:"No hay datos!"})})}}]),n}(s.PureComponent);return Q?(0,B.jsxs)("div",{className:(0,l.Z)(e.root,"flex-grow md:px-64 md:pb-32 flex-shrink-0 p-0 print:p-0"),children:[(0,B.jsx)(w.Z,{className:"my-16 hidden md:inline-flex print:hidden",variant:"contained",size:"medium",color:"primary",onClick:function(){te(!0),document.title=O},children:"Imprimir"}),(0,B.jsx)(re,{ref:t})]}):(0,B.jsx)(D.Z,{})}},73754:function(e,t,n){var a=n(61113),r=n(79176),i=n(46417);t.Z=function(){return(0,i.jsxs)("div",{className:"flex flex-1 flex-col items-center justify-center p-24",children:[(0,i.jsx)(a.Z,{className:"text-13 sm:text-20 mb-16",color:"textSecondary",children:"Cargando..."}),(0,i.jsx)(r.Z,{className:"w-192 sm:w-320 max-w-full rounded-2",color:"secondary"})]})}},37923:function(e,t,n){n.d(t,{Z:function(){return f}});var a=n(29439),r=n(47313),i=n(48070),c=n(66443),o=n(32060),l=n(32530),s=n(79176),d=n(46417),u=(0,i.Z)({root:{width:"100%"}}),m=function(e){var t=e.setOpen,n=e.callBack,i=u(),c=(0,r.useState)(0),o=(0,a.Z)(c,2),l=o[0],m=o[1],x=(0,r.useState)(10),f=(0,a.Z)(x,2),p=f[0],h=f[1],j=(0,r.useRef)((function(){}));return(0,r.useEffect)((function(){j.current=function(){if(l>100)t(!1),n();else{var e=30*Math.random(),a=30*Math.random();m(l+e),h(l+e+a)}}}),[l]),(0,r.useEffect)((function(){var e=setInterval((function(){j.current()}),500);return function(){clearInterval(e)}}),[]),(0,d.jsx)("div",{className:i.root,children:(0,d.jsx)(s.Z,{variant:"buffer",value:l,valueBuffer:p})})},x=(0,i.Z)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}));function f(e){var t=e.callBack,n=x(),i=(0,r.useState)(!0),s=(0,a.Z)(i,2),u=s[0],f=s[1];return(0,d.jsx)("div",{children:(0,d.jsx)(c.Z,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:n.modal,open:u,onClose:function(){f(!1)},closeAfterTransition:!0,BackdropComponent:o.Z,BackdropProps:{timeout:500},children:(0,d.jsx)(l.Z,{in:u,children:(0,d.jsxs)("div",{className:n.paper,children:[(0,d.jsx)("h2",{id:"transition-modal-title",children:"Preparando para impresi\xf3n..."}),(0,d.jsx)(m,{callBack:t,setOpen:f})]})})})})}},43187:function(e,t,n){var a=n(95318);t.Z=void 0;var r=a(n(45045)),i=n(46417),c=(0,r.default)((0,i.jsx)("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"}),"Photo");t.Z=c}}]);