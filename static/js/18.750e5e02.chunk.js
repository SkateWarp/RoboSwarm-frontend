"use strict";(self.webpackChunkfuse_react_app=self.webpackChunkfuse_react_app||[]).push([[18],{42380:function(e,a,t){t.d(a,{Z:function(){return i}});t(47313);var r=t(69099),s=t(36859),n=t(97890),o=t(46417),l={backgroundColor:"white",left:.93,borderRadius:5,padding:5,color:"black",top:26,transition:.5,boxShadow:"0 0 5px -1px rgba(0,0,0,0.75)"};function i(e){var a=e.className,t=void 0===a?"":a,i=(0,n.s0)();return(0,o.jsx)(r.Z,{className:t,style:l,variant:"contained",size:"medium",onClick:function(){return i(-1)},children:(0,o.jsx)(s.Z,{})})}},14018:function(e,a,t){t.r(a),t.d(a,{default:function(){return E}});var r=t(29439),s=t(47313),n=t(61113),o=t(62321),l=t(31881),i=t.n(l),c=t(97890),d=t(70816),u=t.n(d),p=t(72106),m=t(34873),h=t(1827),f=t(1065),x=t(76203),g=t(45894),b=t(19386),v=t(82294),j=t(65280),Z=t(1413),y=t(83061),w=function(){return function(e){switch(e){case 0:return"PARADA OPERACIONAL";case 1:return"FALLA TECNICA";case 2:return"PARADA PROGRAMADA";case 3:return"EXTERNA";case 4:return"OTROS";case 5:return"MAQUINA";case 6:return"PRODUCCION";default:return""}}},N=t(46417);var D=function(e){var a=e.status,t=w();return(0,N.jsx)(n.Z,{className:(0,y.Z)("".concat(function(){switch(a){case 0:return"bg-blue text-white";case 1:return"bg-orange text-white";case 2:return"bg-green-400 text-white";case 3:return"bg-orange-900 text-white";case 4:return"bg-green-900 text-white";case 5:return"bg-red-900 text-white";case 6:return"bg-yellow-900 text-white";default:return""}}()," inline text-11 font-500 px-8 py-4 rounded-4")),children:t(a)})},S=t(73754),P=t(47790),C=t(38735),T=function(e){var a=e.stopCauses,t=(0,g.I0)(),l=(0,g.v9)((function(e){return e.boothDashboardDetailsApp.boothDashboards.pagination})),i=(0,s.useState)(null),c=(0,r.Z)(i,2),d=c[0],p=c[1],m=(0,s.useState)(!1),h=(0,r.Z)(m,2),f=h[0],x=h[1],b=(0,s.useMemo)((function(){return[{Header:"C\xf3digo",accessor:"alarmReason.codigo",className:"",sortable:!0},{Header:"Tipo",className:"whitespace-no-wrap",accessor:"alarmType",width:128,sortable:!0,Cell:function(e){var a,t=e.row;return(0,N.jsx)(D,{status:null===(a=t.original.alarmReason)||void 0===a?void 0:a.stopType})}},{Header:"Descripci\xf3n",accessor:"alarmReason.description",className:"",sortable:!0},{Header:"Operador",className:"",accessor:"operator",sortable:!0,Cell:function(e){var a,t,r=e.row;return(0,N.jsxs)("div",{className:"flex items-center",children:[null===(a=r.original.operator)||void 0===a?void 0:a.firstName," ",null===(t=r.original.operator)||void 0===t?void 0:t.lastName]})}},{Header:"Fecha",width:128,sortable:!0,accessor:"date",Cell:function(e){var a=e.row;return(0,N.jsx)("div",{className:"flex items-center",children:u()(a.original.start).format("DD-MM-YYYY")})}},{Header:"Hora Inicio",width:128,sortable:!0,accessor:"startTime",Cell:function(e){var a=e.row;return(0,N.jsx)("div",{className:"flex items-center",children:u()(a.original.start).format("LT")})}},{Header:"Hora Fin",width:128,sortable:!0,accessor:"endTime",Cell:function(e){var a=e.row;return(0,N.jsx)("div",{className:"flex items-center",children:u()(a.original.end).format("LT")})}},{Header:"Duraci\xf3n",width:128,sortable:!1,accessor:"duration"}]}),[]),v=(0,s.useCallback)((function(e){e.length>0&&t((0,P.ri)((0,Z.Z)((0,Z.Z)({},l),{},{pageNumber:1,sortColumn:e[0].id,sortDesc:e[0].desc})))}),[a]);return(0,s.useEffect)((function(){a&&(p(a),a.length?x(!0):x(null!==d))}),[a]),f&&0===d.length?(0,N.jsx)("div",{className:"flex flex-1 items-center justify-center h-full",children:(0,N.jsx)(n.Z,{color:"textSecondary",variant:"h5",children:"No hay reportes!"})}):f?(0,N.jsx)(o.E.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1,transition:{delay:.2}},children:(0,N.jsx)(C.Z,{onSort:v,columns:b,data:d,pagination:l,searchDataOnChangePage:function(e){t((0,P.ri)((0,Z.Z)((0,Z.Z)({},l),{},{pageNumber:e})))},searchDataOnChangeRowsPerPage:function(e){t((0,P.ri)((0,Z.Z)((0,Z.Z)({},l),{},{pageSize:e})))},onRowClick:function(){}})}):(0,N.jsx)(S.Z,{})},A=t(52094);var R=function(){var e=(0,s.useRef)(null),a=(0,g.v9)((function(e){return e.boothDashboardDetailsApp.boothDashboards.report}));function t(e,a){for(var t=0;t<a.length;t++)if(e===a[t].name)return a[t].seconds}return(0,s.useEffect)((function(){var r,s=null!==e?A.S1(e.current):e,n=[];a&&a.alarmChartResponse.forEach((function(e){n.push({value:(100*Number(e.timePercentage)).toFixed(2),name:e.alarmReason.description,seconds:e.seconds})})),s.setOption({legend:{show:!0,type:"scroll",orient:"horizontal",left:0,top:"bottom"},tooltip:{trigger:"item",formatter:function(e){var a,t="<span> </span>",r="";return e.data&&(r="".concat((a=e.color,"<span style='display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:".concat(a,"'></span>"))," ").concat(e.data.name,": ").concat(e.data.value,"%")),t+=r}},grid:{left:"30%",top:0,right:"2%",bottom:0},graphic:[{type:"text",top:0,z:100,style:{text:a?"Tiempo total: ".concat((r="".concat(a&&a.totalTime),[parseInt(r/60/60),parseInt(r/60%60),parseInt(r%60)].join(":").replace(/\b(\d)\b/g,"0$1"))):"",font:"bold 16px Microsoft YaHei"}}],series:{type:"pie",data:n,center:["50%","50%"],animationType:"scale",label:{overflow:"break",width:110}},textStyle:{color:"#000000"}}),s.on("legendselectchanged",(function(e){return function(e,a){var r=e.selected;for(var s in r)r[s]||t(s,a)}(e,n)}))}),[a]),(0,N.jsx)(N.Fragment,{children:(0,N.jsx)("div",{ref:e,style:{width:"100%",height:"500px",marginTop:"20px"}})})},I=function(e){var a=e.stopCauses,t=(0,s.useState)(0),n=(0,r.Z)(t,2),o=n[0],l=n[1];return(0,N.jsxs)("div",{className:"widget w-full p-16 pb-32",children:[(0,N.jsxs)(v.Z,{value:o,onChange:function(e,a){l(a)},indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"auto",classes:{root:"w-full h-64"},children:[(0,N.jsx)(j.Z,{className:"h-64 normal-case",label:"Causas de paradas"}),(0,N.jsx)(j.Z,{className:"h-64 normal-case",label:"Gr\xe1fica de paradas"})]}),0===o&&(0,N.jsx)(T,{stopCauses:a}),1===o&&(0,N.jsx)(R,{})]})},k=t(23132),z=(0,t(9038).UY)({boothDashboards:P.ZP}),H=t(42380),F={fontSize:"16px"},M={fontSize:"20px"},O={leafCountQuantity:{totalQuantity:0,classifiedQuantity:0,unclassifiedQuantity:0}};var E=(0,k.Z)("boothDashboardDetailsApp",z)((function(){var e,a=(0,g.I0)(),t=(0,c.UO)(),l=t.date,d=t.machineId,v=(0,g.v9)((function(e){return e.boothDashboardDetailsApp.boothDashboards.stops})),j=(0,s.useState)({loginTime:""}),Z=(0,r.Z)(j,2),y=Z[0],w=Z[1],D=(0,s.useState)({logoutTime:null}),C=(0,r.Z)(D,2),T=C[0],A=C[1],R=(0,s.useState)(!1),k=(0,r.Z)(R,2),z=k[0],E=k[1],L=(0,s.useState)(O),Y=(0,r.Z)(L,2),G=Y[0],Q=Y[1],J=(0,s.useState)({id:0,model:""}),B=(0,r.Z)(J,2),U=B[0],_=B[1];return(0,s.useEffect)((function(){i().get("".concat(b.J,"/api/Machine/").concat(d)).then((function(e){_(e.data)})),i().get("".concat(b.J,"/api/LoginActivityLog/first/").concat(d),{params:{date:l}}).then((function(e){w(e.data)})),i().get("".concat(b.J,"/api/LoginActivityLog/last/").concat(d),{params:{date:l}}).then((function(e){A(e.data)})),i().get("".concat(b.J,"/api/SortingProduction/machine/details/").concat(l,"/").concat(d)).then((function(e){Q(e.data),E(!0)})),a((0,P.ri)({startDate:l,endDate:new Date,machineId:d,stopAlarm:!0,alarmType:-1,pageNumber:1,pageSize:10})),a((0,P.Pf)({startDate:l,endDate:new Date,machineId:d,alarmType:-1}))}),[]),z?(0,N.jsxs)("div",{className:"w-full",children:[(0,N.jsx)(H.Z,{className:"ml-16"}),(0,N.jsx)(n.Z,{className:"text-center font-bebasNeue pt-16",color:"textSecondary",variant:"h3",children:U.model}),(0,N.jsx)(n.Z,{className:"text-center font-bebasNeue pt-16",color:"textSecondary",variant:"subtitle1",children:null===(e=G.totalSortingProductions[0].leafSorting)||void 0===e?void 0:e.description}),(0,N.jsx)(o.E.div,{enter:{animation:"transition.slideUpIn"},delay:200,children:(0,N.jsxs)("div",{className:"flex flex-1 flex-col min-w-0",children:[(0,N.jsxs)("div",{className:"flex flex-col flex-wrap px-32 md:px-24",children:[(0,N.jsxs)("div",{className:"flex flex-col sm:flex-row md:justify-center",children:[(0,N.jsxs)("div",{className:"flex w-full sm:w-1/2 md:w-1/4 mb-8 md:m-auto",children:[(0,N.jsx)(p.Z,{color:"action",fontSize:"large"}),(0,N.jsxs)("div",{className:"mt-4 ml-8",children:[(0,N.jsx)(n.Z,{className:"justify-items-center",style:F,color:"textSecondary",children:"Fecha"}),(0,N.jsx)(n.Z,{className:"font-bold",color:"textPrimary",style:M,children:u()(l).format("YYYY-MM-DD")})]})]}),(0,N.jsxs)("div",{className:"flex w-full sm:w-1/2 md:w-1/4 mb-8 md:m-auto",children:[(0,N.jsx)(f.Z,{color:"action",fontSize:"large"}),(0,N.jsxs)("div",{className:"mt-4 ml-8",children:[(0,N.jsx)(n.Z,{style:F,color:"textSecondary",children:"Total de Hojas"}),(0,N.jsx)(n.Z,{className:"font-bold",color:"textPrimary",style:M,children:G.leafCountQuantity.totalQuantity})]})]})]}),(0,N.jsxs)("div",{className:"flex flex-col sm:flex-row md:justify-center",children:[(0,N.jsxs)("div",{className:"flex w-full sm:w-1/2 md:w-1/4 mb-8 md:m-auto",children:[(0,N.jsx)(m.Z,{color:"action",fontSize:"large"}),(0,N.jsxs)("div",{className:"mt-4 ml-8",children:[(0,N.jsx)(n.Z,{className:"justify-items-center",style:F,color:"textSecondary",children:"Inicio"}),(0,N.jsx)(n.Z,{className:"font-bold",color:"textPrimary",style:M,children:u()(y.loginTime).format("LT")})]})]}),(0,N.jsxs)("div",{className:"flex w-full sm:w-1/2 md:w-1/4 mb-8 md:m-auto",children:[(0,N.jsx)(h.Z,{color:"action",fontSize:"large"}),(0,N.jsxs)("div",{className:"mt-4 ml-8",children:[(0,N.jsx)(n.Z,{style:F,color:"textSecondary",children:"Fin"}),(0,N.jsx)(n.Z,{className:"font-bold",color:"textPrimary",style:M,children:T.logoutTime?u()(T.logoutTime).format("LT"):"N/A"})]})]})]})]}),v.length>0?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)("div",{className:"flex flex-col sm:flex-row align-center ml-32 pt-12 mt-32",children:[(0,N.jsx)(x.Z,{color:"action",fontSize:"large"}),(0,N.jsx)(n.Z,{className:"pr-16 text-18 h2 font-bold",children:"Paradas"})]}),(0,N.jsx)(I,{stopCauses:v})]}):(0,N.jsx)(n.Z,{color:"textSecondary",variant:"h5",className:"mt-128 text-center",children:"No hay paradas"})]})})]}):(0,N.jsx)(S.Z,{})}))},47790:function(e,a,t){t.d(a,{Pf:function(){return m},ri:function(){return p}});var r,s=t(4942),n=t(15861),o=t(87757),l=t.n(o),i=t(2628),c=t(31881),d=t.n(c),u=t(19386),p=(0,i.hg)("boothDashboardDetailsApp/boothDashboards/getStopCause",function(){var e=(0,n.Z)(l().mark((function e(a){var t,r,s,n,o,i,c,p,m,h,f,x,g;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.startDate,r=a.endDate,s=a.operatorId,n=a.machineId,o=a.alarmType,i=a.pageSize,c=a.pageNumber,p=a.searchFilter,m=a.alarmTypes,h=a.sortColumn,f=a.sortDesc,e.next=3,d().get("".concat(u.J,"/api/Alarm/stopCauseFilter"),{params:{startDate:t,endDate:r,operatorId:s,alarmType:o,pageNumber:c,pageSize:i,searchFilter:p,StopAlarm:!0,sortColumn:h,sortDesc:f,machineId:n,alarmTypes:m}});case 3:return x=e.sent,e.next=6,x.data;case 6:return g=e.sent,e.abrupt("return",{data:g,routeParams:a});case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()),m=(0,i.hg)("boothDashboardDetailsApp/boothDashboards/getChartStops",function(){var e=(0,n.Z)(l().mark((function e(a){var t,r,s,n,o,i,c,p;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.startDate,r=a.endDate,s=a.stopType,n=a.machineId,o=a.operatorId,i=a.alarmTypes,e.next=3,d().get("".concat(u.J,"/api/Alarm/chart"),{params:{start:t,end:r,stopType:s,StopAlarm:!0,machineId:n,operatorId:o,alarmTypes:i}});case 3:return c=e.sent,e.next=6,c.data;case 6:return p=e.sent,e.abrupt("return",{data:p,routeParams:a});case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()),h=(0,i.HF)({}),f=(h.getSelectors((function(e){return e.boothDashboardDetailsApp.boothDashboards})).selectAll,(0,i.oM)({name:"boothDashboardDetailsApp/boothDashboards",initialState:h.getInitialState({stops:[],report:[],machines:[],routeParams:{},searchText:"",pagination:{startDate:"",endDate:"",operatorId:0,pageSize:5,pageNumber:1,totalPages:0,totalRecords:0,searchFilter:"",sortColumn:"",sortDesc:!1}}),extraReducers:(r={},(0,s.Z)(r,p.fulfilled,(function(e,a){var t=a.payload,r=t.data,s=t.routeParams;e.stops=r.data,h.setAll(e,r.data),e.routeParams=s,e.pagination={pageNumber:r.pageNumber,pageSize:r.pageSize,totalPages:r.totalPages,totalRecords:r.totalRecords,startDate:s.startDate,operatorId:s.operatorId,machineId:s.machineId,endDate:s.endDate,alarmType:s.alarmType,alarmTypes:s.alarmTypes,searchFilter:r.searchFilter,sortColumn:r.sortColumn,sortDesc:r.sortDesc}})),(0,s.Z)(r,m.fulfilled,(function(e,a){var t=a.payload.data;e.report=t})),r)}));a.ZP=f.reducer},38735:function(e,a,t){var r=t(62323),s=t(45110),n=t(47313),o=t(56857),l=t(83590),i=t(46417);a.Z=function(e){var a=e.columns,t=e.data,c=e.pagination,d=e.onRowClick,u=e.onSort,p=e.searchDataOnChangePage,m=e.searchDataOnChangeRowsPerPage,h=(0,s.useTable)({columns:a,data:t,autoResetPage:!0,manualSortBy:!0,disableMultiSort:!0},s.useGlobalFilter,s.useSortBy,s.usePagination,s.useRowSelect),f=h.getTableProps,x=h.headerGroups,g=h.prepareRow,b=h.page,v=h.setPageSize,j=h.state.sortBy;(0,n.useEffect)((function(){u(j),v(c.pageSize)}),[j]);return(0,i.jsxs)("div",{className:"flex flex-col w-full min-h-full sm:border-1 sm:rounded-16 overflow-hidden",children:[(0,i.jsx)(l.Z,{getTableProps:f,headerGroups:x,page:b,prepareRow:g,onRowClick:d,pagination:c}),(0,i.jsx)(r.Z,{component:"div",classes:{root:"shrink-0 border-t-1"},rowsPerPageOptions:[10,25,50,100],colSpan:5,count:c.totalRecords,rowsPerPage:c.pageSize,page:c.pageNumber-1,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!1},onPageChange:function(e,a){e.stopPropagation(),p(a+1)},onRowsPerPageChange:function(e){e.stopPropagation();var a=Number(e.target.value);v(a),m(a)},ActionsComponent:o.Z})]})}},73754:function(e,a,t){var r=t(61113),s=t(79176),n=t(46417);a.Z=function(){return(0,n.jsxs)("div",{className:"flex flex-1 flex-col items-center justify-center p-24",children:[(0,n.jsx)(r.Z,{className:"text-13 sm:text-20 mb-16",color:"textSecondary",children:"Cargando..."}),(0,n.jsx)(s.Z,{className:"w-192 sm:w-320 max-w-full rounded-2",color:"secondary"})]})}},83590:function(e,a,t){var r=t(1413),s=t(83061),n=t(51629),o=t(66835),l=t(23477),i=t(24076),c=t(67478),d=t(82558),u=t(57861),p=t(46417);a.Z=function(e){var a,t,m=e.getTableProps,h=e.headerGroups,f=e.page,x=e.prepareRow,g=e.onRowClick,b=e.pagination,v=Object.keys(null!==(a=null===(t=f[0])||void 0===t?void 0:t.values)&&void 0!==a?a:[]).length,j=b.pageNumber>0?Math.max(0,b.pageNumber*b.pageSize-b.totalRecords):0;return(0,p.jsx)(n.Z,{className:"flex flex-1",children:(0,p.jsxs)(o.Z,(0,r.Z)((0,r.Z)({},m()),{},{stickyHeader:!0,size:"small",className:"simple",children:[(0,p.jsx)(l.Z,{children:h.map((function(e){return(0,p.jsx)(i.Z,(0,r.Z)((0,r.Z)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return(0,p.jsxs)(c.Z,(0,r.Z)((0,r.Z)({className:"whitespace-no-wrap p-4 md:p-4"},e.sortable?e.getHeaderProps(e.getSortByToggleProps()):e.getHeaderProps()),{},{children:[e.render("Header"),e.sortable?(0,p.jsx)(d.Z,{active:e.isSorted,direction:e.isSortedDesc?"desc":"asc"}):null]}))}))}))}))}),(0,p.jsxs)(u.Z,{children:[f.map((function(e){return x(e),(0,p.jsx)(i.Z,(0,r.Z)((0,r.Z)({},e.getRowProps()),{},{onClick:function(a){return g(a,e)},className:"truncate cursor-pointer",style:{height:47,minHeight:47},children:e.cells.map((function(e){return(0,p.jsx)(c.Z,(0,r.Z)((0,r.Z)({},e.getCellProps()),{},{className:(0,s.Z)("p-4 md:p-4",e.column.className),children:e.render("Cell")}))}))}))})),j>0&&(0,p.jsx)(i.Z,{style:{height:47*j},children:(0,p.jsx)(c.Z,{colSpan:v})})]})]}))})}},56857:function(e,a,t){var r=t(88668),s=t(47131),n=t(21411),o=t(77782),l=t(11507),i=t(19860),c=t(46417);a.Z=function(e){var a=(0,i.Z)(),t=e.count,d=e.page,u=e.rowsPerPage,p=e.onPageChange;return(0,c.jsxs)("div",{className:"shrink-0 px-12 overflow-hidden",children:[(0,c.jsx)(s.Z,{onClick:function(e){p(e,0)},disabled:0===d,"aria-label":"first page",size:"large",children:"rtl"===a.direction?(0,c.jsx)(l.Z,{}):(0,c.jsx)(r.Z,{})}),(0,c.jsx)(s.Z,{onClick:function(e){p(e,d-1)},disabled:0===d,"aria-label":"previous page",size:"large",children:"rtl"===a.direction?(0,c.jsx)(o.Z,{}):(0,c.jsx)(n.Z,{})}),(0,c.jsx)(s.Z,{onClick:function(e){p(e,d+1)},disabled:d>=Math.ceil(t/u)-1,"aria-label":"next page",size:"large",children:"rtl"===a.direction?(0,c.jsx)(n.Z,{}):(0,c.jsx)(o.Z,{})}),(0,c.jsx)(s.Z,{onClick:function(e){p(e,Math.max(0,Math.ceil(t/u)-1))},disabled:d>=Math.ceil(t/u)-1,"aria-label":"last page",size:"large",children:"rtl"===a.direction?(0,c.jsx)(r.Z,{}):(0,c.jsx)(l.Z,{})})]})}}}]);